(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(b){var h="()[]{}''\"\"";var a="[]{}";var g=/\s/;var e=b.Pos;b.defineOption("autoCloseBrackets",false,function(i,n,j){if(j!=b.Init&&j){i.removeKeyMap("autoCloseBrackets")}if(!n){return}var l=h,k=a;if(typeof n=="string"){l=n}else{if(typeof n=="object"){if(n.pairs!=null){l=n.pairs}if(n.explode!=null){k=n.explode}}}var m=f(l);if(k){m.Enter=c(k)}i.addKeyMap(m)});function d(i,k){var j=i.getRange(e(k.line,k.ch-1),e(k.line,k.ch+1));return j.length==2?j:null}function f(l){var m={name:"autoCloseBrackets",Backspace:function(n){if(n.getOption("disableInput")){return b.Pass}var o=n.listSelections();for(var p=0;p<o.length;p++){if(!o[p].empty()){return b.Pass}var q=d(n,o[p].head);if(!q||l.indexOf(q)%2!=0){return b.Pass}}for(var p=o.length-1;p>=0;p--){var r=o[p].head;n.replaceRange("",e(r.line,r.ch-1),e(r.line,r.ch+1))}}};var k="";for(var j=0;j<l.length;j+=2){(function(n,i){if(n!=i){k+=i}m["'"+n+"'"]=function(o){if(o.getOption("disableInput")){return b.Pass}var p=o.listSelections(),u,t;for(var s=0;s<p.length;s++){var q=p[s],v=q.head,r;if(n=="'"&&o.getTokenTypeAt(v)=="comment"){return b.Pass}var t=o.getRange(v,e(v.line,v.ch+1));if(!q.empty()){r="surround"}else{if(n==i&&t==i){if(o.getRange(v,e(v.line,v.ch+3))==n+n+n){r="skipThree"}else{r="skip"}}else{if(n==i&&v.ch>1&&o.getRange(e(v.line,v.ch-2),v)==n+n&&(v.ch<=2||o.getRange(e(v.line,v.ch-3),e(v.line,v.ch-2))!=n)){r="addFour"}else{if(n==i&&b.isWordChar(t)){return b.Pass}else{if(o.getLine(v.line).length==v.ch||k.indexOf(t)>=0||g.test(t)){r="both"}else{return b.Pass}}}}}if(!u){u=r}else{if(u!=r){return b.Pass}}}o.operation(function(){if(u=="skip"){o.execCommand("goCharRight")}else{if(u=="skipThree"){for(var x=0;x<3;x++){o.execCommand("goCharRight")}}else{if(u=="surround"){var w=o.getSelections();for(var x=0;x<w.length;x++){w[x]=n+w[x]+i}o.replaceSelections(w,"around")}else{if(u=="both"){o.replaceSelection(n+i,null);o.execCommand("goCharLeft")}else{if(u=="addFour"){o.replaceSelection(n+n+n+n,"before");o.execCommand("goCharRight")}}}}}})};if(n!=i){m["'"+i+"'"]=function(o){var p=o.listSelections();for(var r=0;r<p.length;r++){var q=p[r];if(!q.empty()||o.getRange(q.head,e(q.head.line,q.head.ch+1))!=i){return b.Pass}}o.execCommand("goCharRight")}}})(l.charAt(j),l.charAt(j+1))}return m}function c(i){return function(j){if(j.getOption("disableInput")){return b.Pass}var k=j.listSelections();for(var l=0;l<k.length;l++){if(!k[l].empty()){return b.Pass}var m=d(j,k[l].head);if(!m||i.indexOf(m)%2!=0){return b.Pass}}j.operation(function(){j.replaceSelection("\n\n",null);j.execCommand("goCharLeft");k=j.listSelections();for(var o=0;o<k.length;o++){var n=k[o].head.line;j.indentLine(n,null,true);j.indentLine(n+1,null,true)}})}}});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"),require("../fold/xml-fold"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror","../fold/xml-fold"],a)}else{a(CodeMirror)}}})(function(b){b.defineOption("autoCloseTags",false,function(g,j,h){if(h!=b.Init&&h){g.removeKeyMap("autoCloseTags")}if(!j){return}var i={name:"autoCloseTags"};if(typeof j!="object"||j.whenClosing){i["'/'"]=function(k){return e(k)}}if(typeof j!="object"||j.whenOpening){i["'>'"]=function(k){return a(k)}}g.addKeyMap(i)});var d=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];var c=["applet","blockquote","body","button","div","dl","fieldset","form","frameset","h1","h2","h3","h4","h5","h6","head","html","iframe","layer","legend","object","ol","p","select","table","ul"];function a(v){if(v.getOption("disableInput")){return b.Pass}var h=v.listSelections(),p=[];for(var q=0;q<h.length;q++){if(!h[q].empty()){return b.Pass}var u=h[q].head,w=v.getTokenAt(u);var x=b.innerMode(v.getMode(),w.state),g=x.state;if(x.mode.name!="xml"||!g.tagName){return b.Pass}var j=v.getOption("autoCloseTags"),r=x.mode.configuration=="html";var l=(typeof j=="object"&&j.dontCloseTags)||(r&&d);var t=(typeof j=="object"&&j.indentTags)||(r&&c);var o=g.tagName;if(w.end>u.ch){o=o.slice(0,o.length-w.end+u.ch)}var s=o.toLowerCase();if(!o||w.type=="string"&&(w.end!=u.ch||!/[\"\']/.test(w.string.charAt(w.string.length-1))||w.string.length==1)||w.type=="tag"&&g.type=="closeTag"||w.string.indexOf("/")==(w.string.length-1)||l&&f(l,s)>-1||b.scanForClosingTag&&b.scanForClosingTag(v,u,o,Math.min(v.lastLine()+1,u.line+50))){return b.Pass}var n=t&&f(t,s)>-1;p[q]={indent:n,text:">"+(n?"\n\n":"")+"</"+o+">",newPos:n?b.Pos(u.line+1,0):b.Pos(u.line,u.ch+1)}}for(var q=h.length-1;q>=0;q--){var m=p[q];v.replaceRange(m.text,h[q].head,h[q].anchor,"+insert");var k=v.listSelections().slice(0);k[q]={head:m.newPos,anchor:m.newPos};v.setSelections(k);if(m.indent){v.indentLine(m.newPos.line,null,true);v.indentLine(m.newPos.line+1,null,true)}}}function e(g){if(g.getOption("disableInput")){return b.Pass}var h=g.listSelections(),m=[];for(var l=0;l<h.length;l++){if(!h[l].empty()){return b.Pass}var o=h[l].head,k=g.getTokenAt(o);var j=b.innerMode(g.getMode(),k.state),n=j.state;if(k.type=="string"||k.string.charAt(0)!="<"||k.start!=o.ch-1||j.mode.name!="xml"||!n.context||!n.context.tagName){return b.Pass}m[l]="/"+n.context.tagName+">"}g.replaceSelections(m)}function f(k,g){if(k.indexOf){return k.indexOf(g)}for(var h=0,j=k.length;h<j;++h){if(k[h]==g){return h}}return -1}});(function(){var c=["clike","css","javascript"];for(var a=0;a<c.length;++a){CodeMirror.extendMode(c[a],{blockCommentStart:"/*",blockCommentEnd:"*/",blockCommentContinue:" * "})}function b(l){var k=l.getCursor(),e=l.getTokenAt(k);var h=CodeMirror.innerMode(l.getMode(),e.state).mode;var d;if(e.type=="comment"&&h.blockCommentStart){var f=e.string.indexOf(h.blockCommentEnd);var j=l.getRange(CodeMirror.Pos(k.line,0),CodeMirror.Pos(k.line,e.end)),m;if(f!=-1&&f==e.string.length-h.blockCommentEnd.length){}else{if(e.string.indexOf(h.blockCommentStart)==0){d=j.slice(0,e.start);if(!/^\s*$/.test(d)){d="";for(var g=0;g<e.start;++g){d+=" "}}}else{if((m=j.indexOf(h.blockCommentContinue))!=-1&&m+h.blockCommentContinue.length>e.start&&/^\s*$/.test(j.slice(0,m))){d=j.slice(0,m)}}}}if(d!=null){l.replaceSelection("\n"+d+h.blockCommentContinue,"end")}else{return CodeMirror.Pass}}CodeMirror.defineOption("continueComments",null,function(d,g,e){if(e&&e!=CodeMirror.Init){d.removeKeyMap("continueComment")}var f={name:"continueComment"};f[typeof g=="string"?g:"Enter"]=b;d.addKeyMap(f)})})();(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(e){var d=/MSIE \d/.test(navigator.userAgent)&&(document.documentMode==null||document.documentMode<8);var i=e.Pos;var a={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"};function f(q,m,p,k){var s=q.getLineHandle(m.line),o=m.ch-1;var n=(o>=0&&a[s.text.charAt(o)])||a[s.text.charAt(++o)];if(!n){return null}var l=n.charAt(1)==">"?1:-1;if(p&&(l>0)!=(o==m.ch)){return null}var j=q.getTokenTypeAt(i(m.line,o+1));var r=g(q,i(m.line,o+(l>0?1:0)),l,j||null,k);if(r==null){return null}return{from:i(m.line,o),to:r&&r.pos,match:r&&r.ch==n.charAt(0),forward:l>0}}function g(w,r,n,k,m){var l=(m&&m.maxScanLineLength)||10000;var t=(m&&m.maxScanLines)||1000;var v=[];var x=m&&m.bracketRegex?m.bracketRegex:/[(){}[\]]/;var q=n>0?Math.min(r.line+t,w.lastLine()+1):Math.max(w.firstLine()-1,r.line-t);for(var o=r.line;o!=q;o+=n){var y=w.getLine(o);if(!y){continue}var u=n>0?0:y.length-1,p=n>0?y.length:-1;if(y.length>l){continue}if(o==r.line){u=r.ch-(n<0?1:0)}for(;u!=p;u+=n){var j=y.charAt(u);if(x.test(j)&&(k===undefined||w.getTokenTypeAt(i(o,u+1))==k)){var s=a[j];if((s.charAt(1)==">")==(n>0)){v.push(j)}else{if(!v.length){return{pos:i(o,u),ch:j}}else{v.pop()}}}}}return o-n==(n>0?w.lastLine():w.firstLine())?false:null}function b(s,n,m){var k=s.state.matchBrackets.maxHighlightLineLength||1000;var r=[],l=s.listSelections();for(var o=0;o<l.length;o++){var q=l[o].empty()&&f(s,l[o].head,false,m);if(q&&s.getLine(q.from.line).length<=k){var j=q.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";r.push(s.markText(q.from,i(q.from.line,q.from.ch+1),{className:j}));if(q.to&&s.getLine(q.to.line).length<=k){r.push(s.markText(q.to,i(q.to.line,q.to.ch+1),{className:j}))}}}if(r.length){if(d&&s.state.focused){s.display.input.focus()}var p=function(){s.operation(function(){for(var t=0;t<r.length;t++){r[t].clear()}})};if(n){setTimeout(p,800)}else{return p}}}var c=null;function h(j){j.operation(function(){if(c){c();c=null}c=b(j,false,j.state.matchBrackets)})}e.defineOption("matchBrackets",false,function(j,l,k){if(k&&k!=e.Init){j.off("cursorActivity",h)}if(l){j.state.matchBrackets=typeof l=="object"?l:{};j.on("cursorActivity",h)}});e.defineExtension("matchBrackets",function(){b(this,true)});e.defineExtension("findMatchingBracket",function(l,j,k){return f(this,l,j,k)});e.defineExtension("scanForBracket",function(m,k,l,j){return g(this,m,k,l,j)})});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"),require("../fold/xml-fold"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror","../fold/xml-fold"],a)}else{a(CodeMirror)}}})(function(c){c.defineOption("matchTags",false,function(e,g,f){if(f&&f!=c.Init){e.off("cursorActivity",b);e.off("viewportChange",d);a(e)}if(g){e.state.matchBothTags=typeof g=="object"&&g.bothTags;e.on("cursorActivity",b);e.on("viewportChange",d);b(e)}});function a(e){if(e.state.tagHit){e.state.tagHit.clear()}if(e.state.tagOther){e.state.tagOther.clear()}e.state.tagHit=e.state.tagOther=null}function b(e){e.state.failedTagMatch=false;e.operation(function(){a(e);if(e.somethingSelected()){return}var j=e.getCursor(),g=e.getViewport();g.from=Math.min(g.from,j.line);g.to=Math.max(j.line+1,g.to);var h=c.findMatchingTag(e,j,g);if(!h){return}if(e.state.matchBothTags){var i=h.at=="open"?h.open:h.close;if(i){e.state.tagHit=e.markText(i.from,i.to,{className:"CodeMirror-matchingtag"})}}var f=h.at=="close"?h.open:h.close;if(f){e.state.tagOther=e.markText(f.from,f.to,{className:"CodeMirror-matchingtag"})}else{e.state.failedTagMatch=true}})}function d(e){if(e.state.failedTagMatch){b(e)}}c.commands.toMatchingTag=function(f){var g=c.findMatchingTag(f,f.getCursor());if(g){var e=g.at=="close"?g.open:g.close;if(e){f.extendSelection(e.to,e.from)}}}});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(a){a.defineOption("showTrailingSpace",false,function(b,d,c){if(c==a.Init){c=false}if(c&&!d){b.removeOverlay("trailingspace")}else{if(!c&&d){b.addOverlay({token:function(g){for(var e=g.string.length,f=e;f&&/\s/.test(g.string.charAt(f-1));--f){}if(f>g.pos){g.pos=f;return null}g.pos=e;return"trailingspace"},name:"trailingspace"})}}})});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(a){function b(l,k,m,g){var e=m&&(m.call?m:m.rangeFinder);if(!e){e=a.fold.auto}if(typeof k=="number"){k=a.Pos(k,0)}var f=m&&m.minFoldSize||0;function d(n){var o=e(l,k);if(!o||o.to.line-o.from.line<f){return null}var q=l.findMarksAt(o.from);for(var p=0;p<q.length;++p){if(q[p].__isFold&&g!=="fold"){if(!n){return null}o.cleared=true;q[p].clear()}}return o}var i=d(true);if(m&&m.scanUp){while(!i&&k.line>l.firstLine()){k=a.Pos(k.line-1,0);i=d(false)}}if(!i||i.cleared||g==="unfold"){return}var j=c(m);a.on(j,"mousedown",function(){h.clear()});var h=l.markText(i.from,i.to,{replacedWith:j,clearOnEnter:true,__isFold:true});h.on("clear",function(o,n){a.signal(l,"unfold",l,o,n)});a.signal(l,"fold",l,i.from,i.to)}function c(d){var e=(d&&d.widget)||"\u2194";if(typeof e=="string"){var f=document.createTextNode(e);e=document.createElement("span");e.appendChild(f);e.className="CodeMirror-foldmarker"}return e}a.newFoldFunction=function(e,d){return function(f,g){b(f,g,{rangeFinder:e,widget:d})}};a.defineExtension("foldCode",function(f,d,e){b(this,f,d,e)});a.defineExtension("isFolded",function(f){var e=this.findMarksAt(f);for(var d=0;d<e.length;++d){if(e[d].__isFold){return true}}});a.commands.toggleFold=function(d){d.foldCode(d.getCursor())};a.commands.fold=function(d){d.foldCode(d.getCursor(),null,"fold")};a.commands.unfold=function(d){d.foldCode(d.getCursor(),null,"unfold")};a.commands.foldAll=function(d){d.operation(function(){for(var f=d.firstLine(),g=d.lastLine();f<=g;f++){d.foldCode(a.Pos(f,0),null,"fold")}})};a.commands.unfoldAll=function(d){d.operation(function(){for(var f=d.firstLine(),g=d.lastLine();f<=g;f++){d.foldCode(a.Pos(f,0),null,"unfold")}})};a.registerHelper("fold","combine",function(){var d=Array.prototype.slice.call(arguments,0);return function(e,h){for(var f=0;f<d.length;++f){var g=d[f](e,h);if(g){return g}}}});a.registerHelper("fold","auto",function(d,h){var f=d.getHelpers(h,"fold");for(var e=0;e<f.length;e++){var g=f[e](d,h);if(g){return g}}})});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(a){a.registerHelper("fold","brace",function(m,h){var o=h.line,g=m.getLine(o);var n,t;function d(u){for(var i=h.ch,v=0;;){var w=i<=0?-1:g.lastIndexOf(u,i-1);if(w==-1){if(v==1){break}v=1;i=g.length;continue}if(v==1&&w<h.ch){break}t=m.getTokenTypeAt(a.Pos(o,w+1));if(!/^(comment|string)/.test(t)){return w+1}i=w-1}}var j="{",e="}",n=d("{");if(n==null){j="[",e="]";n=d("[")}if(n==null){return}var l=1,c=m.lastLine(),f,q;outer:for(var s=o;s<=c;++s){var p=m.getLine(s),k=s==o?n:0;for(;;){var b=p.indexOf(j,k),r=p.indexOf(e,k);if(b<0){b=p.length}if(r<0){r=p.length}k=Math.min(b,r);if(k==p.length){break}if(m.getTokenTypeAt(a.Pos(s,k+1))==t){if(k==b){++l}else{if(!--l){f=s;q=k;break outer}}}++k}}if(f==null||o==f&&q==n){return}return{from:a.Pos(o,n),to:a.Pos(f,q)}});a.registerHelper("fold","import",function(b,h){function g(k){if(k<b.firstLine()||k>b.lastLine()){return null}var o=b.getTokenAt(a.Pos(k,1));if(!/\S/.test(o.string)){o=b.getTokenAt(a.Pos(k,o.end+1))}if(o.type!="keyword"||o.string!="import"){return null}for(var l=k,m=Math.min(b.lastLine(),k+10);l<=m;++l){var n=b.getLine(l),j=n.indexOf(";");if(j!=-1){return{startCh:o.end,end:a.Pos(l,j)}}}}var h=h.line,d=g(h),f;if(!d||g(h-1)||((f=g(h-2))&&f.end.line==h-1)){return null}for(var c=d.end;;){var e=g(c.line+1);if(e==null){break}c=e.end}return{from:b.clipPos(a.Pos(h,d.startCh+1)),to:c}});a.registerHelper("fold","include",function(b,g){function f(h){if(h<b.firstLine()||h>b.lastLine()){return null}var i=b.getTokenAt(a.Pos(h,1));if(!/\S/.test(i.string)){i=b.getTokenAt(a.Pos(h,i.end+1))}if(i.type=="meta"&&i.string.slice(0,8)=="#include"){return i.start+8}}var g=g.line,d=f(g);if(d==null||f(g-1)!=null){return null}for(var c=g;;){var e=f(c+1);if(e==null){break}++c}return{from:a.Pos(g,d+1),to:b.clipPos(a.Pos(c))}})});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(i){var m=i.Pos;function l(r,q){return r.line-q.line||r.ch-q.ch}var j="A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD";var o=j+"-:.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040";var d=new RegExp("<(/?)(["+j+"]["+o+"]*)","g");function b(q,r,t,s){this.line=r;this.ch=t;this.cm=q;this.text=q.getLine(r);this.min=s?s.from:q.firstLine();this.max=s?s.to-1:q.lastLine()}function h(q,s){var r=q.cm.getTokenTypeAt(m(q.line,s));return r&&/\btag\b/.test(r)}function a(q){if(q.line>=q.max){return}q.ch=0;q.text=q.cm.getLine(++q.line);return true}function n(q){if(q.line<=q.min){return}q.text=q.cm.getLine(--q.line);q.ch=q.text.length;return true}function g(s){for(;;){var r=s.text.indexOf(">",s.ch);if(r==-1){if(a(s)){continue}else{return}}if(!h(s,r+1)){s.ch=r+1;continue}var q=s.text.lastIndexOf("/",r);var t=q>-1&&!/\S/.test(s.text.slice(q+1,r));s.ch=r+1;return t?"selfClose":"regular"}}function k(r){for(;;){var q=r.ch?r.text.lastIndexOf("<",r.ch-1):-1;if(q==-1){if(n(r)){continue}else{return}}if(!h(r,q+1)){r.ch=q;continue}d.lastIndex=q;r.ch=q;var s=d.exec(r.text);if(s&&s.index==q){return s}}}function p(q){for(;;){d.lastIndex=q.ch;var r=d.exec(q.text);if(!r){if(a(q)){continue}else{return}}if(!h(q,r.index+1)){q.ch=r.index+1;continue}q.ch=r.index+r[0].length;return r}}function e(s){for(;;){var r=s.ch?s.text.lastIndexOf(">",s.ch-1):-1;if(r==-1){if(n(s)){continue}else{return}}if(!h(s,r+1)){s.ch=r;continue}var q=s.text.lastIndexOf("/",r);var t=q>-1&&!/\S/.test(s.text.slice(q+1,r));s.ch=r+1;return t?"selfClose":"regular"}}function f(t,r){var q=[];for(;;){var v=p(t),s,x=t.line,w=t.ch-(v?v[0].length:0);if(!v||!(s=g(t))){return}if(s=="selfClose"){continue}if(v[1]){for(var u=q.length-1;u>=0;--u){if(q[u]==v[2]){q.length=u;break}}if(u<0&&(!r||r==v[2])){return{tag:v[2],from:m(x,w),to:m(t.line,t.ch)}}}else{q.push(v[2])}}}function c(s,r){var q=[];for(;;){var w=e(s);if(!w){return}if(w=="selfClose"){k(s);continue}var v=s.line,u=s.ch;var x=k(s);if(!x){return}if(x[1]){q.push(x[2])}else{for(var t=q.length-1;t>=0;--t){if(q[t]==x[2]){q.length=t;break}}if(t<0&&(!r||r==x[2])){return{tag:x[2],from:m(s.line,s.ch),to:m(v,u)}}}}}i.registerHelper("fold","xml",function(q,v){var s=new b(q,v.line,0);for(;;){var t=p(s),r;if(!t||s.line!=v.line||!(r=g(s))){return}if(!t[1]&&r!="selfClose"){var v=m(s.line,s.ch);var u=f(s,t[2]);return u&&{from:v,to:u.from}}}});i.findMatchingTag=function(q,x,t){var s=new b(q,x.line,x.ch,t);if(s.text.indexOf(">")==-1&&s.text.indexOf("<")==-1){return}var r=g(s),w=r&&m(s.line,s.ch);var v=r&&k(s);if(!r||r=="selfClose"||!v||l(s,x)>0){return}var u={from:m(s.line,s.ch),to:w,tag:v[2]};if(v[1]){return{open:c(s,v[2]),close:u,at:"close"}}else{s=new b(q,w.line,w.ch,t);return{open:u,close:f(s,v[2]),at:"open"}}};i.findEnclosingTag=function(q,w,s){var r=new b(q,w.line,w.ch,s);for(;;){var u=c(r);if(!u){break}var t=new b(q,w.line,w.ch,s);var v=f(t,u.tag);if(v){return{open:u,close:v}}}};i.scanForClosingTag=function(q,u,t,s){var r=new b(q,u.line,u.ch,s?{from:0,to:s}:null);return !!f(r,t)}});(function(){CodeMirror.defineExtension("autoFormatAll",function(h,j){var k=this;var o=k.getMode(),n=k.getRange(h,j).split("\n");var c=CodeMirror.copyState(o,k.getTokenAt(h).state);var g=k.getOption("tabSize");var e="",q=0,a=h.ch==0;function d(){e+="\n";a=true;++q}for(var f=0;f<n.length;++f){var m=new CodeMirror.StringStream(n[f],g);while(!m.eol()){var p=CodeMirror.innerMode(o,c);var b=o.token(m,c),l=m.current();m.start=m.pos;if(!a||/\S/.test(l)){e+=l;a=false}if(!a&&p.mode.newlineAfterToken&&p.mode.newlineAfterToken(b,l,m.string.slice(m.pos)||n[f+1]||"",p.state)){d()}}if(!m.pos&&o.blankLine){o.blankLine(c)}if(!a&&f<n.length-1){d()}}k.operation(function(){k.replaceRange(e,h,j);for(var r=h.line+1,i=h.line+q;r<=i;++r){k.indentLine(r,"smart")}k.setCursor({line:0,ch:0})})})})();(function(){CodeMirror.extendMode("css",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(c,d){return/^[;{}]$/.test(d)}});CodeMirror.extendMode("javascript",{commentStart:"/*",commentEnd:"*/",wordWrapChars:[";","\\{","\\}"],autoFormatLineBreaks:function(h){var g=0;var f=this.jsonMode?function(i){return i.replace(/([,{])/g,"$1\n").replace(/}/g,"\n}")}:function(i){return i.replace(/(;|\{|\})([^\r\n;])/g,"$1\n$2")};var e=a(h),d="";if(e!=null){for(var c=0;c<e.length;c++){if(e[c].start>g){d+=f(h.substring(g,e[c].start));g=e[c].start}if(e[c].start<=g&&e[c].end>=g){d+=h.substring(g,e[c].end);g=e[c].end}}if(g<h.length){d+=f(h.substr(g))}}else{d=f(h)}return d.replace(/^\n*|\n*$/,"")}});function a(h){var g=[/for\s*?\((.*?)\)/g,/&#?[a-z0-9]+;[\s\S]/g,/\"(.*?)((\")|$)/g,/\/\*(.*?)(\*\/|$)/g,/^\/\/.*/g];var e=[];for(var d=0;d<g.length;d++){var f=0;while(f<h.length){var c=h.substr(f).match(g[d]);if(c!=null){e.push({start:f+c.index,end:f+c.index+c[0].length});f+=c.index+Math.max(1,c[0].length)}else{break}}}e.sort(function(j,i){return j.start-i.start});return e}var b=/^(a|abbr|acronym|area|base|bdo|big|br|button|caption|cite|code|col|colgroup|dd|del|dfn|em|frame|hr|iframe|img|input|ins|kbd|label|legend|link|map|object|optgroup|option|param|q|samp|script|select|small|span|strong|sub|sup|textarea|tt|var)$/;CodeMirror.extendMode("xml",{commentStart:"<!--",commentEnd:"-->",noBreak:false,noBreakEmpty:null,tagType:"",tagName:"",isXML:false,newlineAfterToken:function(g,e,f,c){var m="label|li|option|textarea|title";var l="a|b|bdi|bdo|big|center|cite|del|em|font|i|img|ins|s|small|span|strike|strong|sub|sup|u";var j=m+"|"+l;var h=false,d=null,k="";this.isXML=this.configuration=="xml"?true:false;if(g=="comment"||/<!--/.test(f)){return false}if(g=="tag"){if(e.indexOf("<")==0&&!e.indexOf("</")==0){this.tagType="open";d=e.match(/^<\s*?([\w]+?)$/i);this.tagName=d!=null?d[1]:"";var k=this.tagName.toLowerCase();if(("|"+j+"|").indexOf("|"+k+"|")!=-1){this.noBreak=true}}if(e.indexOf(">")==0&&this.tagType=="open"){this.tagType="";var i=this.isXML?"[^<]*?":"";if(RegExp("^"+i+"</s*?"+this.tagName+"s*?>","i").test(f)){this.noBreak=false;if(!this.isXML){this.tagName=""}return false}h=this.noBreak;this.noBreak=false;return h?false:true}if(e.indexOf("</")==0){this.tagType="close";d=e.match(/^<\/\s*?([\w]+?)$/i);if(d!=null){k=d[1].toLowerCase()}if(("|"+l+"|").indexOf("|"+k+"|")!=-1){this.noBreak=true}}if(e.indexOf(">")==0&&this.tagType=="close"){this.tagType="";if(f.indexOf("<")==0){d=f.match(/^<\/?\s*?([\w]+?)(\s|>)/i);k=d!=null?d[1].toLowerCase():"";if(("|"+j+"|").indexOf("|"+k+"|")==-1){this.noBreak=false;return true}}h=this.noBreak;this.noBreak=false;return h?false:true}}if(f.indexOf("<")==0){this.noBreak=false;if(this.isXML&&this.tagName!=""){this.tagName="";return false}d=f.match(/^<\/?\s*?([\w]+?)(\s|>)/i);k=d!=null?d[1].toLowerCase():"";if(("|"+j+"|").indexOf("|"+k+"|")!=-1){return false}else{return true}}return false}});CodeMirror.defineExtension("commentRange",function(d,g,f){var c=this,e=CodeMirror.innerMode(c.getMode(),c.getTokenAt(g).state).mode;c.operation(function(){if(d){c.replaceRange(e.commentEnd,f);c.replaceRange(e.commentStart,g);if(g.line==f.line&&g.ch==f.ch){c.setCursor(g.line,g.ch+e.commentStart.length)}}else{var j=c.getRange(g,f);var i=j.indexOf(e.commentStart);var h=j.lastIndexOf(e.commentEnd);if(i>-1&&h>-1&&h>i){j=j.substr(0,i)+j.substring(i+e.commentStart.length,h)+j.substr(h+e.commentEnd.length)}c.replaceRange(j,g,f)}})});CodeMirror.defineExtension("autoIndentRange",function(e,d){var c=this;this.operation(function(){for(var f=e.line;f<=d.line;f++){c.indentLine(f,"smart")}})});CodeMirror.defineExtension("autoFormatRange",function(k,l){var m=this;var q=m.getMode(),p=m.getRange(k,l).split("\n");var e=CodeMirror.copyState(q,m.getTokenAt(k).state);var j=m.getOption("tabSize");var g="",s=0,c=k.ch==0;function f(){g+="\n";c=true;++s}for(var h=0;h<p.length;++h){var o=new CodeMirror.StringStream(p[h],j);while(!o.eol()){var r=CodeMirror.innerMode(q,e);var d=q.token(o,e),n=o.current();o.start=o.pos;if(!c||/\S/.test(n)){g+=n;c=false}if(!c&&r.mode.newlineAfterToken&&r.mode.newlineAfterToken(d,n,o.string.slice(o.pos)||p[h+1]||"",r.state)){f()}}if(!o.pos&&q.blankLine){q.blankLine(e)}if(!c&&h<p.length-1){f()}}m.operation(function(){m.replaceRange(g,k,l);for(var t=k.line+1,i=k.line+s;t<=i;++t){m.indentLine(t,"smart")}m.setSelection(k,m.getCursor(false))})})})();(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(a){var h=2;var b="matchhighlight";var c=100;function g(j){if(typeof j=="object"){this.minChars=j.minChars;this.style=j.style;this.showToken=j.showToken;this.delay=j.delay}if(this.style==null){this.style=b}if(this.minChars==null){this.minChars=h}if(this.delay==null){this.delay=c}this.overlay=this.timeout=null}a.defineOption("highlightSelectionMatches",false,function(j,m,k){if(k&&k!=a.Init){var l=j.state.matchHighlighter.overlay;if(l){j.removeOverlay(l)}clearTimeout(j.state.matchHighlighter.timeout);j.state.matchHighlighter=null;j.off("cursorActivity",f)}if(m){j.state.matchHighlighter=new g(m);e(j);j.on("cursorActivity",f)}});function f(j){var k=j.state.matchHighlighter;clearTimeout(k.timeout);k.timeout=setTimeout(function(){e(j)},k.delay)}function e(j){j.operation(function(){var o=j.state.matchHighlighter;if(o.overlay){j.removeOverlay(o.overlay);o.overlay=null}if(!j.somethingSelected()&&o.showToken){var n=o.showToken===true?/[\w$]/:o.showToken;var p=j.getCursor(),l=j.getLine(p.line),q=p.ch,k=q;while(q&&n.test(l.charAt(q-1))){--q}while(k<l.length&&n.test(l.charAt(k))){++k}if(q<k){j.addOverlay(o.overlay=d(l.slice(q,k),n,o.style))}return}if(j.getCursor("head").line!=j.getCursor("anchor").line){return}var m=j.getSelections()[0].replace(/^\s+|\s+$/g,"");if(m.length>=o.minChars){j.addOverlay(o.overlay=d(m,false,o.style))}})}function i(k,j){return(!k.start||!j.test(k.string.charAt(k.start-1)))&&(k.pos==k.string.length||!j.test(k.string.charAt(k.pos)))}function d(l,k,j){return{token:function(m){if(m.match(l)&&(!k||i(m,k))){return j}m.next();m.skipTo(l.charAt(0))||m.skipToEnd()}}}});